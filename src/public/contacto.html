<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Contacto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="description" content="ContÃ¡ctanos en el Laboratorio Regional de CÃ³mputo de Alto DesempeÃ±o (LARCAD), UNACH. Estamos ubicados en Tuxtla GutiÃ©rrez, Chiapas." />
    <style>
      @media (min-width: 768px) {
        #chatbot-box {
          width: 400px;
          height: 600px;
        }
      }
      @media (max-width: 768px) {
        #chatbot-box {
          width: 100%;
          height: 80%;
          bottom: 0;
          right: 0;
          border-radius: 0;
        }
      }
    </style>
</head>
<body class="bg-[#0E0E0E] text-white font-sans">

<!-- prueba mensaje -->

<!-- Burbuja flotante del chatbot -->
<div id="chatbot-container" class="fixed bottom-6 right-6 z-50">
  <button id="chatbot-toggle" class="bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none">
    ðŸ’¬
  </button>
  <div id="chatbot-box" class="hidden w-80 bg-white text-black rounded-lg shadow-2xl mt-2 p-4 max-h-[400px] flex flex-col">
    <div id="chat-mensajes" class="flex-1 overflow-y-auto mb-4 space-y-2 text-sm"></div>
    <div class="flex gap-2">
      <input type="text" id="chat-entrada" placeholder="Escribe..." class="flex-1 border rounded px-2 py-1 focus:outline-none" />
      <button onclick="enviarAlBot()" class="bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700">Enviar</button>
    </div>
  </div>
</div>
<script>
// Genera un sessionId Ãºnico para el usuario
const sessionId = Date.now() + '-' + Math.random().toString(36).substr(2, 9);
const mensajes = document.getElementById('chat-mensajes');
const entrada = document.getElementById('chat-entrada');
const toggle = document.getElementById('chatbot-toggle');
const box = document.getElementById('chatbot-box');

async function enviarAlBot(mensaje) {
    if (!mensaje) {
        mensaje = entrada.value.trim();
        if (!mensaje) return;

        // Mensaje del usuario
        mensajes.innerHTML += `<div class="text-right bg-blue-500 text-white p-2 rounded-lg mb-2 inline-block">${mensaje}</div>`;
        entrada.value = '';
        mensajes.scrollTop = mensajes.scrollHeight;
    }

    try {
        // Mensaje inicial de carga
        mensajes.innerHTML += `<div class="text-left bg-gray-200 text-black p-2 rounded-lg mb-2 inline-block" id="loading-indicator">Escribiendo...</div>`;
        mensajes.scrollTop = mensajes.scrollHeight;

        const res = await fetch('/api/chatbot', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                message: mensaje,
                sessionId: sessionId
            })
        });

        const data = await res.json();

        // Remueve el indicador de carga
        const loadingIndicator = document.getElementById('loading-indicator');
        if (loadingIndicator) loadingIndicator.remove();

        // Agrega la respuesta del bot
        mensajes.innerHTML += `<div class="text-left bg-gray-200 text-black p-2 rounded-lg mb-2 inline-block">${data.fulfillmentText}</div>`;
        mensajes.scrollTop = mensajes.scrollHeight;

        // Sugerir mÃ¡s opciones
        sugerirOpciones();
    } catch (error) {
        console.error('Error:', error);
        mensajes.innerHTML += `<div class="text-left text-red-500"><strong>Error:</strong> No se pudo conectar con el asistente</div>`;
        mensajes.scrollTop = mensajes.scrollHeight;
    }
}

function sugerirOpciones() {
    mensajes.innerHTML += `<div class="text-left space-y-2 mt-4">
        <button onclick="enviarAlBot('Â¿QuÃ© servicios ofrecen?')" class="bg-blue-500 text-white px-3 py-1 rounded-lg block">Â¿QuÃ© servicios ofrecen?</button>
        <button onclick="enviarAlBot('Â¿DÃ³nde estÃ¡n ubicados?')" class="bg-blue-500 text-white px-3 py-1 rounded-lg block">Â¿DÃ³nde estÃ¡n ubicados?</button>
        <button onclick="enviarAlBot('Â¿CÃ³mo puedo contactarlos?')" class="bg-blue-500 text-white px-3 py-1 rounded-lg block">Â¿CÃ³mo puedo contactarlos?</button>
    </div>`;
    mensajes.scrollTop = mensajes.scrollHeight;
}

// Permitir enviar con Enter
entrada.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') enviarAlBot();
});

// Mensaje inicial al abrir el chat
toggle.addEventListener('click', () => {
    if (box.classList.contains('hidden')) {
        box.classList.remove('hidden');
        box.classList.add('flex');
        // Mensaje de bienvenida inicial
        mensajes.innerHTML = `<div class="text-left bg-gray-200 text-black p-2 rounded-lg mb-2 inline-block">Â¡Hola! Soy el asistente de LARCAD. Â¿En quÃ© puedo ayudarte?</div>`;
        sugerirOpciones();
    } else {
        box.classList.add('hidden');
        box.classList.remove('flex');
    }
});
</script>


    <!-- gif de cargado -->
    <div id="loader" class="fixed inset-0 z-50 flex items-center justify-center bg-white">
    <img src="/img/cargando.gif" alt="Cargando..." class="w-32 h-32 animate-pulse" />
  </div>
  <script>
    // Muestra el loader al cargar la pÃ¡gina
    window.onload = function() {
        const loader = document.getElementById('loader');
        // Oculta el loader despuÃ©s de 2 segundos (ajusta segÃºn sea necesario)
        setTimeout(() => {
            loader.style.display = 'none';
        }, 500); // Cambia 2000 a 0 si no quieres un retraso
    };
</script>

<nav class="bg-black text-white px-6 py-7 flex items-center justify-between fixed top-0 left-0 w-full z-50">
        <div class="font-bold text-2xl">LARCAD</div>
        <!-- Hamburger Icon (Mobile) -->
        <button id="menu-toggle" class="md:hidden focus:outline-none" aria-label="Abrir menÃº">
            <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </button>
        <!-- Menu -->
        <ul id="nav-menu" class="flex-col md:flex-row md:flex space-y-4 md:space-y-0 md:space-x-6 absolute md:static top-16 left-0 w-full md:w-auto bg-black md:bg-transparent px-6 md:px-0 py-4 md:py-0 hidden md:flex z-20">
            <li><a href="index.html" class="hover:text-blue-300 block">Inicio</a></li>
            <li><a href="nosotros.html" class="hover:text-blue-300 block">Nosotros</a></li>
            <li><a href="servicio.html" class="hover:text-blue-300 block">Servicios</a></li>
            <li class="relative group">
  <button type="button" class="hover:text-blue-300 flex items-center w-full md:w-auto">
    Recursos
    <svg class="ml-1 w-4 h-4 inline-block" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  <ul class="absolute md:left-0 mt-2 w-40 bg-black text-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-30 hidden md:block">
    <li><a href="hardware.html" class="block px-4 py-2 hover:bg-blue-900">Hardware</a></li>
    <li><a href="software.html" class="block px-4 py-2 hover:bg-blue-900">Software</a></li>
  </ul>
</li>


            <li><a href="contacto.html" class="hover:text-blue-300 block">Contacto</a></li>
        </ul>
    </nav>


    <!-- Hero Banner -->
    <div class="w-full h-[60vh] md:h-[calc(100vh-72px)] relative pt-16">
        <img src="/img/InicioPrincipal.png" alt="Supercomputo" class="w-full h-full object-cover" />
        <div class="absolute inset-0 flex flex-col items-end justify-center pr-4 md:pr-8 pointer-events-none">
            <img src="/img/Group 12.png" alt="LARCAD Logo" class="h-[18vw] md:h-[13vw] w-auto mb-[-2vw] md:mb-[-1vw]" />
        </div>
    </div>

    <!-- Encabezado -->
    <div class="flex flex-col items-center my-8">
        <h1 class="text-xl md:text-2xl font-bold text-orange-500">LARCAD</h1>
        <div class="w-16 md:w-24 h-1 bg-[#00A6FF] mt-2 rounded"></div>
    </div>

   <!-- Formulario de contacto -->
<main class="p-4 md:p-8 max-w-5xl mx-auto">
    <section class="bg-white text-black p-8 rounded-xl shadow-2xl bg-gradient-to-br from-white to-gray-100" data-aos="fade-up">
        <h2 class="text-2xl font-bold text-center text-[#FF9009] mb-6">ContÃ¡ctanos</h2>

        <!-- Mensaje de Ã©xito -->
        <div id="success-message" class="hidden mb-6">
            <div class="flex items-center justify-center bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl" role="alert">
                <svg class="w-6 h-6 mr-2 text-green-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                </svg>
                <span>Â¡Tu mensaje se enviÃ³ correctamente!</span>
            </div>
        </div>

        <form id="contact-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="nombre">Nombre</label>
                    <input type="text" id="nombre" name="nombre" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="apellidos">Apellidos</label>
                    <input type="text" id="apellidos" name="apellidos" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="telefono">TelÃ©fono</label>
                    <input type="tel" id="telefono" name="telefono" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="correo">Correo electrÃ³nico</label>
                    <input type="email" id="correo" name="correo" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm" />
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="mensaje">Mensaje</label>
                    <textarea id="mensaje" name="mensaje" rows="5" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"></textarea>
                </div>
               <div class="md:col-span-2">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-xl transition duration-300 shadow-lg">
                    Enviar mensaje
                </button>
            </div>
        </form>
    </section>
</main>

<!-- Agrega este script al final del body -->
<script>
document.getElementById('contact-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = {
        nombre: document.getElementById('nombre').value,
        apellidos: document.getElementById('apellidos').value,
        telefono: document.getElementById('telefono').value,
        correo: document.getElementById('correo').value,
        mensaje: document.getElementById('mensaje').value
    };
    
    fetch('/send-email', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Mostrar mensaje de Ã©xito
            document.getElementById('success-message').classList.remove('hidden');
            // Limpiar el formulario
            document.getElementById('contact-form').reset();
            // Ocultar el mensaje despuÃ©s de 5 segundos
            setTimeout(() => {
                document.getElementById('success-message').classList.add('hidden');
            }, 5000);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('OcurriÃ³ un error al enviar el mensaje. Por favor intenta nuevamente.');
    });
});
</script>

        <!-- Mapa y Detalles de contacto lado a lado -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12 mb-8 items-stretch">
            <!-- Detalles de contacto -->
            <div class="bg-[#022d5a] text-white rounded-xl shadow-2xl p-8 flex flex-col justify-center" data-aos="fade-right">
                <h4 class="text-orange-400 font-bold mb-4">Detalles del contacto</h4>
                <ul class="space-y-2 text-sm text-gray-200">
                    <li><a href="mailto:larcad@unach.mx" class="hover:underline text-blue-300">larcad@unach.mx</a></li>
                    <li>Universidad AutÃ³noma de Chiapas</li>
                    <li>Carretera Emiliano Zapata Km. 8</li>
                    <li>Ciudad Universitaria, C. P. 29050</li>
                    <li>Tuxtla GutiÃ©rrez, Chiapas, MÃ©xico</li>
                    <li>(+52) 961 617 8000 ext. 8107</li>
                </ul>
            </div>
            <!-- Mapa -->
            <div class="rounded-xl overflow-hidden shadow-xl flex items-center" data-aos="fade-left">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3821.651786418601!2d-93.1856328!3d16.694299600000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ecd0a8df2ea837%3A0x197c180cf82b5093!2sLaboratorio%20Regional%20de%20Computo%20de%20Alto%20Desempeno%20%2C%20UNACH!5e0!3m2!1ses-419!2sus!4v1749743085891!5m2!1ses-419!2sus"
                    width="100%" height="260" style="border:0; border-radius:12px; min-height:180px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#022d5a] text-white py-10">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
            <!-- Columna 1: Contacto -->
            <div>
                <h4 class="text-orange-400 font-bold mb-4">Detalles del contacto</h4>
                <ul class="space-y-2 text-sm text-gray-200">
                    <li><a href="mailto:larcad@unach.mx" class="hover:underline text-blue-300">larcad@unach.mx</a></li>
                    <li>Universidad AutÃ³noma de Chiapas</li>
                    <li>Carretera Emiliano Zapata Km. 8</li>
                    <li>Ciudad Universitaria, C. P. 29050</li>
                    <li>Tuxtla GutiÃ©rrez, Chiapas, MÃ©xico</li>
                    <li>(+52) 961 617 8000 ext. 8107</li>
                </ul>
            </div>
            <!-- Columna 2: MÃ¡s InformaciÃ³n -->
            <div>
                <h4 class="text-orange-400 font-bold mb-4">MÃ¡s InformaciÃ³n</h4>
                <ul class="space-y-2 text-sm text-gray-200">
                    <li><a href="index.html" class="hover:text-orange-400 transition">inicio</a></li>
                    <li><a href="nosotros.html" class="hover:text-orange-400 transition">acerca de</a></li>
                    <li><a href="servicio.html" class="hover:text-orange-400 transition">servicios</a></li>
                    <li><a href="recursos.html" class="hover:text-orange-400 transition">recursos</a></li>
                    <li><a href="contacto.html" class="hover:text-orange-400 transition">contacto</a></li>
                </ul>
            </div>
            <!-- Columna 3: Mapa, Logos y redes -->
            <div class="flex flex-col items-center space-y-4">
                <div class="w-full mb-4">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3821.651786418601!2d-93.1856328!3d16.694299600000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ecd0a8df2ea837%3A0x197c180cf82b5093!2sLaboratorio%20Regional%20de%20Computo%20de%20Alto%20Desempeno%20%2C%20UNACH!5e0!3m2!1ses-419!2sus!4v1749743085891!5m2!1ses-419!2sus"
                        width="100%" height="180" style="border:0; border-radius:12px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
                <div class="flex gap-4">
                    <img src="/img/icons/logo_Cienciayfisica.png" alt="FAM UNACH" class="h-16" />
                    <img src="/img/UNACH.svg" alt="UNACH" class="h-16" />
                </div>
            </div>
        </div>
    </footer>

    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({
          duration: 1000,
          once: true
      });

      // MenÃº hamburguesa y submenÃº Recursos (unificado y sin duplicados)
      const btn = document.getElementById('menu-toggle');
      const menu = document.getElementById('nav-menu');
      if (btn && menu) {
        btn.addEventListener('click', () => {
          menu.classList.toggle('hidden');
        });
      }

      // SubmenÃº funcional en mÃ³vil (menor a 768px)
      const recursosItem = document.querySelector('li.group');
      if (recursosItem) {
        const submenu = recursosItem.querySelector('ul');
        const recursosButton = recursosItem.querySelector('button');
        if (recursosButton && submenu) {
          recursosButton.addEventListener('click', (e) => {
            if (window.innerWidth < 768) {
              e.preventDefault();
              submenu.classList.toggle('hidden');
            }
          });
        }
      }

      // Formulario de contacto
      const contactForm = document.getElementById('contact-form');
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          document.getElementById('success-message').classList.remove('hidden');
          this.reset();
          setTimeout(() => {
            document.getElementById('success-message').classList.add('hidden');
          }, 4000);
        });
      }
    </script>
</body>
</html>
